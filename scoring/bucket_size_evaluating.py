# Imports
import statistics
from rouge_score import rouge_scorer
from final_year_project_django.ingestion import text_aggrogation_array, gpt_3_summary_regenerate, text_aggregation_bucketing

scores_precision_non_bucket_rougeL = []
scores_recall_non_bucket_rougeL = []

scores_precision_bucket_rougeL = []
scores_recall_bucket_rougeL = []

scores_precision_non_bucket_rouge1 = []
scores_recall_non_bucket_rouge1 = []

scores_precision_bucket_rouge1 = []
scores_recall_bucket_rouge1 = []

# Results created by searching and saving the results
search_results_1 = [[0.7431962490081787, {'title': 'What the second month of war in Ukraine may bring', 'body': '', 'body_tldr': "Russia's brutal and unprovoked invasion of Ukraine has entered its second month with scores of civilians dead, entire communities leveled, and perhaps most troubling, no end in sight.", 'news_source': 'CNN'}], [0.717896580696106, {'title': "Russia claims 'first stage' of its war is over and focus will shift to eastern Ukraine", 'body': '', 'body_tldr': 'A top Russian general gave some of the most detailed public remarks to date on Russia\'s military strategy in Ukraine, claiming on Friday that the "first stage" of Russia\'s military plan is now complete, with their primary focus now centered on eastern Ukraine.', 'news_source': 'CNN'}], [0.6998388767242432, {'title': 'Ukrainians disrupt and derail Russian offensive as war moves to new phase', 'body': '', 'body_tldr': "Just over a month after the first ballistic missiles slammed into Kyiv's international airport, the Russian campaign has been disrupted and derailed by stubborn Ukrainian resistance -- and in the last few days by agile Ukrainian counterattacks on several fronts.", 'news_source': 'CNN'}], [0.6918972730636597, {'title': 'Biden warns stakes of war in Ukraine go well beyond its borders', 'body': '', 'body_tldr': "President Joe Biden will travel to Poland on Friday, his second stop on a last-minute trip through Europe aimed at coordinating the West's response to Russia's invasion of Ukraine.", 'news_source': 'CNN'}], [0.653894305229187, {'title': "b'Ukraine strikes Turkmen gas deal\\n'", 'body': 'b\'Ukraine strikes Turkmen gas deal\\n\\nUkraine has agreed to pay 30% more for natural gas supplied by Turkmenistan.\\n\\nThe deal was sealed three days after Turkmenistan cut off gas supplies in a price dispute that threatened the Ukrainian economy. Supplies from Turkmenistan account for 45% of all natural gas imported by Ukraine, which has large coal deposits but no gas fields. Turkmenistan is also trying to strike a similar deal with Russia, which is not so dependent on its gas. Turkmen President Saparmurat Niyazov, who signed the contract, said the Turkmen side agreed to lower the price demanded by $2 per 1,000 cubic metres, bringing it down to $58. But the new price is still $14 higher than the price fixed in the contract for 2004. The head of the Ukrainian state-owned Naftohaz company, Yury Boyko, said he was "fully happy" with the deal. On Friday, Turkmenistan acted on a threat and shut off gas supplies to Ukraine in attempt to bring the price dispute to a head. Mr Niyazov said that his government would insist on the same price for supplies to Russia. Analysts say thay may not happen as Russia, the world\\\'s leading gas producer, needs the cheap Turkmen gas only to relieve is state-owned Gazprom from costly investment in the exploration of oil fields in Siberia. Turkmenistan is the second-largest gas producer in the world.\\n\'', 'body_tldr': "b'The deal was sealed three days after Turkmenistan cut off gas supplies in a price dispute that threatened the Ukrainian economy.On Friday, Turkmenistan acted on a threat and shut off gas supplies to Ukraine in attempt to bring the price dispute to a head.Supplies from Turkmenistan account for 45% of all natural gas imported by Ukraine, which has large coal deposits but no gas fields.Ukraine has agreed to pay 30% more for natural gas supplied by Turkmenistan.Turkmenistan is the second-largest gas producer in the world.'", 'news_source': 'BBC news'}]]
search_results_2 = [[0.659806489944458, {'title': "b'Boateng to step down at election\\n'", 'body': 'b\'Boateng to step down at election\\n\\nPaul Boateng, Chief Secretary to the Treasury, is to step down as a Labour MP at the forthcoming general election.\\n\\nMr Boateng, 53, is to become the UK\\\'s high commissioner to South Africa. He was the UK\\\'s first black cabinet minister when appointed to his post in 2002, promoted from the Home Office, where he had been prisons minister. Mr Boateng served on the Greater London Council before being elected to Parliament in 1987, declaring "today Brent South, tomorrow Soweto". He will succeed the previous High Commissioner, Ann Grant, shortly after the next election, which is widely expected to be held on 5 May. The appointment is dependent on Labour\\\'s re-election.\\n\\nPrime Minister Tony Blair said: "Paul has been both a valued colleague and a trusted friend for many years. "He has made an immense contribution to public life in Britain and I am delighted that he has agreed to continue that service to the people of Britain by acting as their representative in South Africa." Chancellor Gordon Brown said: "Over the past eight years Paul\\\'s contribution to the Treasury and the government has been exceptional - and it has been my privilege to have worked closely with him closely at the Treasury. "I congratulate Paul on his new appointment. "He has displayed huge dedication to the cause of African development for many years and it is fitting that, in this year of challenge and opportunity for the African continent, Paul has been given such a pivotal role in our fight against poverty and injustice. "I look forward to continuing to work with Paul on this vital agenda."\\n\\nMr Boateng said: "I am honoured to be asked to take on this role, especially as it comes at such an integral time for our relationship with South Africa and the African continent. "There shall be many new challenges and opportunities ahead and I look forward to embracing them with great anticipation." Asked if he was appointed as the result of a "fair and open" competition, he replied: "I have been appointed as a result of a process that\\\'s been used before by Labour and Conservative governments to appoint people of all parties who have relevant experience." Mr Boateng also laughed off suggestions that his re-election in Brent South seat had been in danger saying it was "one of the safest Labour seats in the country". Shadow foreign secretary Michael Ancram said that, if in government, he would refuse to approve either Mr Boateng\\\'s appointment or that of ex-Cabinet minister Helen Liddell as high commissioner to Australia. "Mr Blair\\\'s appointment of Paul Boateng is the latest example of a worrying trend of failed Tony\\\'s cronies being appointed to senior diplomatic posts," he said.\\n\'', 'body_tldr': 'b\'Mr Boateng, 53, is to become the UK\\\'s high commissioner to South Africa."Mr Blair\\\'s appointment of Paul Boateng is the latest example of a worrying trend of failed Tony\\\'s cronies being appointed to senior diplomatic posts," he said.Mr Boateng said: "I am honoured to be asked to take on this role, especially as it comes at such an integral time for our relationship with South Africa and the African continent.Shadow foreign secretary Michael Ancram said that, if in government, he would refuse to approve either Mr Boateng\\\'s appointment or that of ex-Cabinet minister Helen Liddell as high commissioner to Australia.Prime Minister Tony Blair said: "Paul has been both a valued colleague and a trusted friend for many years."I congratulate Paul on his new appointment.Paul Boateng, Chief Secretary to the Treasury, is to step down as a Labour MP at the forthcoming general election.Mr Boateng also laughed off suggestions that his re-election in Brent South seat had been in danger saying it was "one of the safest Labour seats in the country".\'', 'news_source': 'BBC news'}], [0.6378185749053955, {'title': "b'Howard unveils election platform\\n'", 'body': 'b\'Howard unveils election platform\\n\\nThe Conservatives would stand up for the "forgotten majority", Michael Howard pledged as he unveiled the first part of the Tory election manifesto.\\n\\nThe Tory leader argued there was a mass of people whom he says feel let down by Tony Blair and who share Tory values. In the foreword to the manifesto, he promises to focus on restoring order, trying to lower taxes and giving power back to the people. Labour says the document offers only a return to a "failed Tory past". The Liberal Democrats say the Conservatives cannot win what they predict will be a three-party contest.\\n\\nCampaigning activity is accelerating ahead of the general election, which is widely tipped for May but could be any time before June 2006. Labour on Monday postponed a launch of election posters because of the Asian tsunami disaster. Mr Howard published the introduction to the Tory manifesto. Other chapters will follow in coming weeks.\\n\\nIn a speech in Northamptonshire, he said the "forgotten majority" made up the backbone of Britain. They were people who were saving for their first home or their retirement, working hard and accepting their responsibilities. He says in the manifesto foreword: "They have been forgotten, neglected and taken for granted by Mr Blair."\\n\\nSaying Britain must change direction, Mr Howard argues government is too big and cannot continue "down the path of ever rising taxes". He promises to ensure frontline professionals, parents and patients make the key decisions rather than Whitehall "bureaucrats". And he says the Tories would get a grip on crime, immigration and disorder. "The decline of responsibility and the proliferation of so-called \\\'human rights\\\' have left us in a moral quagmire, unable to get a grip on rising crime and disorder," he says.\\n\\nMr Howard says he will produce a Timetable for Action so people can hold him to account but on issues like taxation he has so far only published options, not specific plans. Mr Howard told BBC News: "I\\\'m determined to lower taxes but I\\\'m also determined not to make any promises I can\\\'t keep." The Tories were unveiling material months ahead of the expected election because they needed time to make voters aware of their policies, he said. He was asked if Tory support for the government on Iraq and identity cards had given the Lib Dems the chance to portray themselves as the opposition to Labour. Mr Howard argued the only test for his policies was whether they were best for Britain. It had nothing to do with putting "clear blue water" between himself and his opponents.\\n\\nLabour\\\'s election slogan will be: "Britain\\\'s working, don\\\'t let the Tories wreck it again". Campaign coordinator Alan Milburn accused the Tories of "launching Thatcherism in instalments" while Labour helped the hard working majority of families. Lib Dem president Simon Hughes said his party had set out its election stance in September. "The Liberal Democrats will ask the British people for support this year as the party with the policies best able to deliver freedom and fairness and to restore trust," he said.\\n\'', 'body_tldr': 'b\'The Conservatives would stand up for the "forgotten majority", Michael Howard pledged as he unveiled the first part of the Tory election manifesto.Mr Howard published the introduction to the Tory manifesto.The Tory leader argued there was a mass of people whom he says feel let down by Tony Blair and who share Tory values.He says in the manifesto foreword: "They have been forgotten, neglected and taken for granted by Mr Blair."Mr Howard argued the only test for his policies was whether they were best for Britain.Mr Howard says he will produce a Timetable for Action so people can hold him to account but on issues like taxation he has so far only published options, not specific plans.And he says the Tories would get a grip on crime, immigration and disorder.The Tories were unveiling material months ahead of the expected election because they needed time to make voters aware of their policies, he said.Labour says the document offers only a return to a "failed Tory past".Labour\\\'s election slogan will be: "Britain\\\'s working, don\\\'t let the Tories wreck it again".Saying Britain must change direction, Mr Howard argues government is too big and cannot continue "down the path of ever rising taxes".\'', 'news_source': 'BBC news'}], [0.6207116842269897, {'title': "b'What the election should really be about?\\n'", 'body': 'b"What the election should really be about?\\n\\nA general election is the best chance most pressure groups get to make a real impact on government policy. Here is how six leading lobbies plan to make sure their cause is being debated ahead of an expected Spring poll.\\n\\nWe\'ve called for the state pension to be increased from \\xc2\\xa379.60 to the pensioner credit guarantee level of \\xc2\\xa3105.45. That\'s what we\'re calling for. Many pensioners are disadvantaged by the current system. If we\'ve got one in five pensioners below the poverty line, we\'ve got to make it more generous or have these people living in poverty.\\n\\nWe\'ve drawn up a pensioners\' manifesto. This will be sent to each of the candidates in the 659 constituencies. They will be asked which of the top five issues, including the pension issue, they would support. Once we\'ve got their responses we will publish the results within the constituencies and nationally as well. It\'s our way of putting the politicians on notice. We are trying to get across the fact that there are 11m voters over 60 in the country, they are more likely to vote than other sections of society and thirdly they are true swing voters. Before 1997 most pensioners voted Conservative. In 1997 and 2001 they voted Labour. But there is no guarantee they will vote for a Labour government this time around. They cannot take that vote for granted.\\n\\nPensions generally will certainly be a big election issue even though the government has postponed the publication of Adair Turner\'s full report into the issue. He said the UK had one of the least generous pensions systems in the developed world.\\n\\nThat the government takes seriously the impact of aviation on the environment.\\n\\nWe haven\'t worked out specific plans but I imagine we will lobby political parties and incumbent MPs. Various local groups will do that in their particular areas and we will provide a national briefing. We don\'t have any large demonstrations planned but they can\'t be ruled out.\\n\\nIt is hard to say whether we will be successful. We have got the issue in the public consciousness to an extent, but it is difficult to say whether an election will raise its importance in the public mind or whether it will be pushed out by big issues like Iraq.\\n\\nRepealing the Hunting Bill.\\n\\nWe are challenging the use of the Parliament Act 1949 in a High Court action. We are hoping to hear in the New Year. Whichever way the court rules the other side will appeal so we expect it to fall plumb in electioneering time. When the ban comes into force on 18 February we will be going to the European Court because no compensation is being paid. So there\'s a lot of legal territory to go. We are trying to engage with the ministers by demonstrating and talking. Whatever intelligence we get we will try to turn up and speak to whoever it is. (Rural affairs minister) Alun Michael has avoided us and cancelled engagements so that makes it difficult. It is not intimidatory - on the whole it is groups of angry housewives. Of course there is an element of shouting because people are angry but there is no violence because that does not achieve anything.\\n\\nIt will fall plumb in the run up to the most important general election Tony Blair will ever face. It\'s exactly what the prime minister did not want. He wanted the issue off the table until after the election.\\n\\nPeople using live animals as targets for sport both here and abroad. The reason for including abroad is because of trophy hunting. It is another sort of form of shooting for sport. The principle is the same whether it\'s a tiger or a pheasant.\\n\\nWe will widely publicise what\'s happening in relation to trophy hunting. We will publicise the darker aspects of the target animal industry the UK. We will seek to get pledges from individual MPs and would-be MPs saying that they are against the use of animals as targets for sports. We would like the support of political parties but I think a general election is very much to do with pledges MPs make to their electors. With hunting we had many MPs who were happy to say they were against it.\\n\\nI think what we will get is a very real climbing up the agenda. Whether or not we will get a ban I am not sure. But it will mobilise public opinion. Everything we do will reduce animal suffering and in time that will lead to a ban.\\n\\nThe issue that we think is the most important for this election is choice. The language of consumerism is very commonplace in government and across the political spectrum. Choice as an ideology is beginning to be the privatisation of this decade. It\'s become an issue in itself but what\'s really missing from the debate is the consumer\'s choice in that. Choice is not choice at all if all you have to choose from is two failing schools. We have seen so many pensions mis-selling scandals and in the pensions industry there\'s a maximum of choice but a minimum quality in that. We want choice on the consumer\'s terms - that means clear and accessible information to operate that choice.\\n\\nFirstly, we have our website. It features our campaigns and changes every day. Secondly through our 700,000 members who communicate with us. Thirdly through the media and also what we will be doing is holding a pre-election conference. We will invite the opinion formers, MPs, journalists and others. The idea is that we open up communications between members of the public and the politicians.\\n\\nI think we will be successful. It\'s very much the language being used by the main political parties. Politicians on all sides are very sensitive to this issue they want to be seen to be responding to this issue.\\n\\nFuel duty is a large part of operational costs for road haulage workers. We have been hearing about this proposed increase of 1.92p per litre that Gordon Brown has been postponing and postponing. Tuppence does not sound like a great deal but every year if you operate one vehicle that\'s an increase of about \\xc2\\xa3750. If you\'re running 10 vehicles it\'s obviously 10 times that.\\n\\nIf fuel duty does rise we will be absolutely horrified. There will be a huge effect throughout the industry and I would not be surprised if you see widespread demonstrations. What it will mean is there will be a number of firms going out of business.\\n\\nWe will continue to do what we have always done we keep the issue in the trade press. Regrettably it\'s one of those stories that it is getting harder to get into the national press. Whatever we do, the public don\'t like lorries - they see us as a complaining minority. But they don\'t realise that when you see a car on the road it is probably going to work, when you see a lorry it\'s already at work.\\n"', 'body_tldr': 'b"The issue that we think is the most important for this election is choice.We have got the issue in the public consciousness to an extent, but it is difficult to say whether an election will raise its importance in the public mind or whether it will be pushed out by big issues like Iraq.We would like the support of political parties but I think a general election is very much to do with pledges MPs make to their electors.A general election is the best chance most pressure groups get to make a real impact on government policy.Tuppence does not sound like a great deal but every year if you operate one vehicle that\'s an increase of about \\xc2\\xa3750.Whether or not we will get a ban I am not sure.We will seek to get pledges from individual MPs and would-be MPs saying that they are against the use of animals as targets for sports.Pensions generally will certainly be a big election issue even though the government has postponed the publication of Adair Turner\'s full report into the issue.Politicians on all sides are very sensitive to this issue they want to be seen to be responding to this issue.If we\'ve got one in five pensioners below the poverty line, we\'ve got to make it more generous or have these people living in poverty.He wanted the issue off the table until after the election.But there is no guarantee they will vote for a Labour government this time around.With hunting we had many MPs who were happy to say they were against it.It\'s become an issue in itself but what\'s really missing from the debate is the consumer\'s choice in that.We have seen so many pensions mis-selling scandals and in the pensions industry there\'s a maximum of choice but a minimum quality in that.Whatever we do, the public don\'t like lorries - they see us as a complaining minority.They will be asked which of the top five issues, including the pension issue, they would support.We want choice on the consumer\'s terms - that means clear and accessible information to operate that choice.I think what we will get is a very real climbing up the agenda.We\'ve called for the state pension to be increased from \\xc2\\xa379.60 to the pensioner credit guarantee level of \\xc2\\xa3105.45.People using live animals as targets for sport both here and abroad.We are trying to get across the fact that there are 11m voters over 60 in the country, they are more likely to vote than other sections of society and thirdly they are true swing voters.Regrettably it\'s one of those stories that it is getting harder to get into the national press.Whichever way the court rules the other side will appeal so we expect it to fall plumb in electioneering time.Everything we do will reduce animal suffering and in time that will lead to a ban.Choice is not choice at all if all you have to choose from is two failing schools.It is hard to say whether we will be successful.We will publicise the darker aspects of the target animal industry the UK.The language of consumerism is very commonplace in government and across the political spectrum.But they don\'t realise that when you see a car on the road it is probably going to work, when you see a lorry it\'s already at work.The reason for including abroad is because of trophy hunting.We haven\'t worked out specific plans but I imagine we will lobby political parties and incumbent MPs."', 'news_source': 'BBC news'}], [0.6044574975967407, {'title': 'b"Lib Dems\' new election PR chief\\n"', 'body': 'b\'Lib Dems\\\' new election PR chief\\n\\nThe Lib Dems have appointed a senior figure from BT to be the party\\\'s new communications chief for their next general election effort.\\n\\nSandy Walkington will now work with senior figures such as Matthew Taylor on completing the party manifesto. Party chief executive Lord Rennard said the appointment was a "significant strengthening of the Lib Dem team". Mr Walkington said he wanted the party to be ready for any "mischief" rivals or the media tried to throw at it.\\n\\n"My role will be to ensure this new public profile is effectively communicated at all levels," he said. "I also know the party will be put under scrutiny in the media and from the other parties as never before - and we will need to show ourselves ready and prepared to counter the mischief and misrepresentation that all too often comes from the party\\\'s opponents. "The party is already demonstrating on every issue that it is the effective opposition." Mr Walkington\\\'s new job title is director of general election communications.\\n\'', 'body_tldr': 'b\'Mr Walkington said he wanted the party to be ready for any "mischief" rivals or the media tried to throw at it."I also know the party will be put under scrutiny in the media and from the other parties as never before - and we will need to show ourselves ready and prepared to counter the mischief and misrepresentation that all too often comes from the party\\\'s opponents.The Lib Dems have appointed a senior figure from BT to be the party\\\'s new communications chief for their next general election effort.Party chief executive Lord Rennard said the appointment was a "significant strengthening of the Lib Dem team".\'', 'news_source': 'BBC news'}], [0.6013460159301758, {'title': "b'Blunkett hints at election call\\n'", 'body': 'b\'Blunkett hints at election call\\n\\nEx-Home Secretary David Blunkett has given fresh clues that the general election will be announced on Monday.\\n\\nHe told BBC Radio Five Live: "I\\\'m out in my constituency getting ready for what we presume will be an announcement very shortly at the weekend." He clarified that he meant he would be in his Sheffield seat this weekend, not that he expected an election call then. Tony Blair is tipped to ask the Queen on Monday to dissolve Parliament ready for a 5 May poll.\\n\'', 'body_tldr': "b'He clarified that he meant he would be in his Sheffield seat this weekend, not that he expected an election call then.Ex-Home Secretary David Blunkett has given fresh clues that the general election will be announced on Monday.'", 'news_source': 'BBC news'}]]
search_results_3 = [[0.6314684152603149, {'title': "b'US firm pulls out of Iraq\\n'", 'body': 'b\'US firm pulls out of Iraq\\n\\nA US company has pulled out of a major contract to rebuild Iraq\\\'s transport system after attacks on reconstruction efforts, Pentagon officials have said.\\n\\nContrack International, of Arlington, Virginia, heads a coalition of firms working on a series of schemes. Its withdrawal from the $325m (\\xc2\\xa3170m) contract in November is thought to be the largest cancellation to date. Contrack said "the original scope of work that was envisioned could not be executed in a cost-effective manner". But the firm denied reports it was withdrawing completely from Iraq. "Members of the joint venture including Contrack are committed to the ongoing reconstruction efforts, are actively working in Iraq and continue to look for new construction opportunities in the country," it said in a statement. The Pentagon\\\'s Project and Contract Office (PCO) in Baghdad said it had taken over Contrack\\\'s management of the subcontractors working on the transportation projects.\\n\\nUS firms and their workers have been targets of attacks, and security concerns are said to be a major reason for the slow pace of reconstruction in Iraq. Of the $18.4bn in reconstruction funds approved by Congress, less than $2bn has been spent. Lt Col Eric Schnaible of the PCO told the Associated Press news agency Contrack\\\'s withdrawal from the transportation contract was a "mutually agreed-to separation" and did not indicate a movement by US companies to leave Iraq. "Some parts of the country are a whole lot more permissive than others," he added. "Where we can get the work done, good things are happening."\\n\'', 'body_tldr': 'b\'"Members of the joint venture including Contrack are committed to the ongoing reconstruction efforts, are actively working in Iraq and continue to look for new construction opportunities in the country," it said in a statement.US firms and their workers have been targets of attacks, and security concerns are said to be a major reason for the slow pace of reconstruction in Iraq.A US company has pulled out of a major contract to rebuild Iraq\\\'s transport system after attacks on reconstruction efforts, Pentagon officials have said.Lt Col Eric Schnaible of the PCO told the Associated Press news agency Contrack\\\'s withdrawal from the transportation contract was a "mutually agreed-to separation" and did not indicate a movement by US companies to leave Iraq.Contrack said "the original scope of work that was envisioned could not be executed in a cost-effective manner".\'', 'news_source': 'BBC news'}], [0.5806945562362671, {'title': "b'Iraqi voters turn to economic issues\\n'", 'body': 'b\'Iraqi voters turn to economic issues\\n\\nBeyond the desperate security situation in Iraq lies an economy in tatters.\\n\\nA vicious cycle of unemployment, poor social services and poverty has been made worse by a lack of investment. So there is much hope that an elected government will break the deadlock. "First rule of law, then the economy," says Radwan Hadi, deputy managing director of Aberdeen-based oil and gas consultancy Blackwatch Petroleum Services, which entered Iraq in 2003. Mr Hadi\\\'s view about what the new government\\\'s priorities should be is shared by many Iraqis. The economy has become the second-most dominant issue for many political parties ahead of Sunday\\\'s election, according to Bristol University political scientist Anne Alexander, who is working on a project that looks at governance and security in post-war Iraq.\\n\\nJob creation ranks high both on election manifestos and on the Iraqi people\\\'s wish list. Nobody knows exactly how many Iraqis are out of work, but it is clear that the situation is dire. "Estimates of Iraq\\\'s unemployment rate vary, but we estimate it to be between 30-40%," the Washington-based independent think-tank The Brookings Institution says in its Iraq Index. But some progress has been made, largely thanks to the country\\\'s oil revenues which have exceeded $22bn since June 2003.\\n\\nIraq\\\'s infrastructure is on the mend, with notable improvements having been made in areas such as electricity supply, irrigation, telephone networks and the re-opening of hospitals. But serious problems remain and the growing divide between haves and have-nots is angering voters. One Iraqi woman told Ms Alexander about her frustration as she watched TV adverts for private hospitals soon after having failed to track down basic medicines from Baghdad\\\'s pharmacies. Observes Mr Hadi: "The economy at present marks a big divide; the rich get richer, the poor get poorer." An indication of this can be seen in the world of finance where, in contrast with the daily plight of ordinary people, 19 private banks operate, only one of which is run in accordance with Islamic banking principles. Hopes are high for the future of finance, so foreign banks have been buying into the sector. National Bank of Kuwait has bought a majority stake in Credit Bank of Iraq, the Jordanian investment bank Export & Finance Bank has bought 49% of National Bank of Iraq.\\n\\nForeign firms also hope to cash in on the reconstruction effort. Bechtel\\\'s efforts to rebuild schools and restore power have attracted controversy as well as boosting its bottom line while Halliburton has enjoyed a wealth of military contracts. But the involvement of foreign firms in the health and banking sectors and beyond sits uneasily with many Iraqis who are accustomed to the state taking responsibility for functions that are essential to making society work, observes Ms Alexander. "It is seen as a selling off of Iraq\\\'s assets and bringing in multinationals at the expense of Iraqi businesses and Iraqi workers," she says. Consequently, the transitional government has been forced to backtrack in recent months over its proposal to allow 100% foreign ownership of Iraqi assets, she explains. In the West, it is easy to forget that the otherwise brutal Baathist regime used to look after the majority of Iraq\\\'s citizens rather well in terms of job creation, social security and healthcare. Opinion polls suggest that "people still want the state to take a leading role in providing these things", Ms Alexander says.\\n\\nYet in some areas of the economy, investment from abroad is still warmly welcomed, insists Mr Hadi, an Iraqi who left the country three decades ago. "I think the private sector will evolve incredibly fast," Mr Hadi says. "Iraq\\\'s vast natural resources can support any magnitude of economic growth."\\n\\nMany foreign companies say they are keen to get in on the act, yet few are actually entering the country in any meaningful way. But there are exceptions. Mr Hadi\\\'s Blackwatch is just one of many small operators preparing for a much bigger future. Blackwatch\\\'s Baghdad-based affiliate Falcon Group has dozens of people working for it across the country in Kirkuk and Baghdad, and its engineers and geo-scientists work with the Iraqi oil ministry to hammer out technology transfer issues, Mr Hadi points out. "These guys are trying to work. The Iraqi business people will do business at all times. "Life goes on in Iraq, the people take responsibility, they want to live normal lives."\\n\'', 'body_tldr': 'b\'Blackwatch\\\'s Baghdad-based affiliate Falcon Group has dozens of people working for it across the country in Kirkuk and Baghdad, and its engineers and geo-scientists work with the Iraqi oil ministry to hammer out technology transfer issues, Mr Hadi points out.But the involvement of foreign firms in the health and banking sectors and beyond sits uneasily with many Iraqis who are accustomed to the state taking responsibility for functions that are essential to making society work, observes Ms Alexander.Yet in some areas of the economy, investment from abroad is still warmly welcomed, insists Mr Hadi, an Iraqi who left the country three decades ago."It is seen as a selling off of Iraq\\\'s assets and bringing in multinationals at the expense of Iraqi businesses and Iraqi workers," she says.The economy has become the second-most dominant issue for many political parties ahead of Sunday\\\'s election, according to Bristol University political scientist Anne Alexander, who is working on a project that looks at governance and security in post-war Iraq.National Bank of Kuwait has bought a majority stake in Credit Bank of Iraq, the Jordanian investment bank Export & Finance Bank has bought 49% of National Bank of Iraq.Mr Hadi\\\'s Blackwatch is just one of many small operators preparing for a much bigger future.Consequently, the transitional government has been forced to backtrack in recent months over its proposal to allow 100% foreign ownership of Iraqi assets, she explains.Observes Mr Hadi: "The economy at present marks a big divide; the rich get richer, the poor get poorer."Hopes are high for the future of finance, so foreign banks have been buying into the sector."I think the private sector will evolve incredibly fast," Mr Hadi says.The Iraqi business people will do business at all times.Many foreign companies say they are keen to get in on the act, yet few are actually entering the country in any meaningful way.Mr Hadi\\\'s view about what the new government\\\'s priorities should be is shared by many Iraqis.\'', 'news_source': 'BBC news'}], [0.5482702851295471, {'title': "b'Iraq and Afghanistan in WTO talks\\n'", 'body': 'b\'Iraq and Afghanistan in WTO talks\\n\\nThe World Trade Organisation (WTO) is to hold membership talks with both Iraq and Afghanistan.\\n\\nBut Iran\\\'s bid to join the trade body has been refused after the US blocked its application for the 21st time. The countries stand to reap huge benefits from membership of the group, whose purpose is to promote free trade. Joining, however, is a lengthy process. China\\\'s admission in 2001 took 15 years and talks with Russia and Saudi Arabia have been taking place for 10 years. Membership of the Geneva-based WTO helps guarantee a country\\\'s goods receives equal treatment in the markets of other member states - a policy which has seen it become closely associated with globalisation.\\n\\nIraq\\\'s Trade Minister Mohammed Mustafa al-Jibouri welcomed the move, describing it as significant as November\\\'s decision by the Paris Club of creditor nations to write off 80% of the country\\\'s debts. Assad Omar, Afghanistan\\\'s envoy to the United Nations in Geneva, said accession would contribute to "regional prosperity and global security". There are now 27 countries seeking membership of the WTO. Prospective members need to enter into negotiations with potential trading countries and change domestic laws to bring them in line with WTO regulations. Before the process gets under way, all 148 WTO members must give their backing to applicant countries. The US said it could not approve Iran\\\'s application because it is currently reviewing relations. But several nations criticised the approach, and European Union ambassador to the WTO, Carlo Trojan, said Iran\\\'s application "must be treated independently of political issues".\\n\'', 'body_tldr': 'b\'There are now 27 countries seeking membership of the WTO.The World Trade Organisation (WTO) is to hold membership talks with both Iraq and Afghanistan.But several nations criticised the approach, and European Union ambassador to the WTO, Carlo Trojan, said Iran\\\'s application "must be treated independently of political issues".Before the process gets under way, all 148 WTO members must give their backing to applicant countries.Membership of the Geneva-based WTO helps guarantee a country\\\'s goods receives equal treatment in the markets of other member states - a policy which has seen it become closely associated with globalisation.But Iran\\\'s bid to join the trade body has been refused after the US blocked its application for the 21st time.\'', 'news_source': 'BBC news'}], [0.5084607601165771, {'title': "b'Iraq advice claim sparks new row\\n'", 'body': 'b\'Iraq advice claim sparks new row\\n\\nThe Tories say ministers must respond in Parliament to claims that the legal advice used to justify the Iraq war was drawn up at Number 10.\\n\\nDowning Street has denied the claims, made in a new book about the Attorney General Lord Goldsmith\\\'s advice. Lord Goldsmith also denied them, saying he was not "leaned on" in any way. But the Conservatives and Liberal Democrats say they want the publication of the full legal advice given by the Attorney General.\\n\\nThe government has consistently refused to publish Lord Goldsmith\\\'s advice on the legality of the war - saying such papers have always been kept confidential.\\n\\nBut a short statement about Lord Goldsmith\\\'s position was presented in a written parliamentary answer on 17 March 2003 - just before a crucial Commons vote on the military action. It said it was "plain" Iraq continued to be in material breach of UN resolution 1441. In his new book, Lawless World, Philippe Sands, a QC and international law professor, suggests the parliamentary answer was written in Downing Street. According to Mr Sands, Lord Goldsmith had warned Tony Blair in a document on 7 March 2003 that the use of force against Iraq could be illegal and that it would have been safer to seek a second UN resolution sanctioning military action.\\n\\nMr Sands told Newsnight the government had prepared a legal team to be able to defend its case, in case legal action was taken against the UK over the war. On 10 March, military chiefs reportedly asked for an unequivocal statement about the legality of the war to make sure troops could be defended in a court of law. The book, being serialised in the Guardian newspaper, says on 13 March Lord Goldsmith met then Home Office Minister Lord Falconer and Downing Street adviser Baroness Morgan. "After that Downing Street proceeded to set out his [Lord Goldsmith\\\'s] view in a parliamentary answer which was then published on 17 March," said Mr Sands.\\n\\nTory leader Michael Howard reiterated calls for the publication of the full legal advice given by the Attorney General, warning: "This issue will not go away." "These revelations throw an intensive spotlight on to the cavalier way in which this government operates - even on an issue as important as peace and war. "The government needs to act to restore public confidence and trust." Liberal Democrat foreign affairs spokesman Menzies Campbell repeated his party\\\'s calls for Lord Goldsmith\\\'s first piece of legal advice to be made public. "The public interest, which the government claims justifies non-publication of the whole of the advice, can only be served now by the fullest disclosure."\\n\\nIn a statement to Newsnight, Lord Goldsmith said: "In my parliamentary answer on March 17 2003, I explained my genuinely held independent view, that military action was lawful under the existing Security Council resolutions. "It was certainly not a view that I expressed as a result of being leaned on in any way, nor as I have already made clear, was it written by or at Number 10." The prime minister\\\'s official spokesman also rejected the claims, saying: "The attorney general made it clear the words and the judgement were his." But ex-foreign secretary Robin Cook says all the advice should now be published. He said the claims suggested Parliament had only received a pr&#233;cis of Lord Goldsmith\\\'s second opinion - and that it was actually drafted in No 10. This would be wrong even if Lord Goldsmith had signed the statement, Mr Cook said, because the attorney general\\\'s advice should be an "independent legal opinion", not subject to "political negotiation of this kind".\\n\'', 'body_tldr': 'b\'"After that Downing Street proceeded to set out his [Lord Goldsmith\\\'s] view in a parliamentary answer which was then published on 17 March," said Mr Sands.Downing Street has denied the claims, made in a new book about the Attorney General Lord Goldsmith\\\'s advice.But a short statement about Lord Goldsmith\\\'s position was presented in a written parliamentary answer on 17 March 2003 - just before a crucial Commons vote on the military action.In a statement to Newsnight, Lord Goldsmith said: "In my parliamentary answer on March 17 2003, I explained my genuinely held independent view, that military action was lawful under the existing Security Council resolutions.This would be wrong even if Lord Goldsmith had signed the statement, Mr Cook said, because the attorney general\\\'s advice should be an "independent legal opinion", not subject to "political negotiation of this kind".Lord Goldsmith also denied them, saying he was not "leaned on" in any way.The government has consistently refused to publish Lord Goldsmith\\\'s advice on the legality of the war - saying such papers have always been kept confidential.The Tories say ministers must respond in Parliament to claims that the legal advice used to justify the Iraq war was drawn up at Number 10.Liberal Democrat foreign affairs spokesman Menzies Campbell repeated his party\\\'s calls for Lord Goldsmith\\\'s first piece of legal advice to be made public.But the Conservatives and Liberal Democrats say they want the publication of the full legal advice given by the Attorney General.\'', 'news_source': 'BBC news'}], [0.4859448969364166, {'title': "b'Irish company hit by Iraqi report\\n'", 'body': 'b"Irish company hit by Iraqi report\\n\\nShares in Irish oil company Petrel Resources have lost more than 50% of their value on a report that the firm has failed to win a contract in Iraq.\\n\\nReuters news agency reported that Iraq\'s Oil Ministry has awarded the first post-war oilfield contracts to a Canadian and a Turkish company. By 1700 GMT, Petrel\'s shares fell from 97p ($1.87) to 44p ($0.85). Petrel said that it has not received any information from Iraqi authorities to confirm or deny the report.\\n\\nIraq is seeking to award contracts for three projects, valued at $500m (\\xc2\\xa3258.5m). Turkey\'s Everasia is reported by Reuters to have won a contract to develop the Khurmala Dome field in the north of the country. A Canadian company, named IOG, is reported to have won the contract to run the Himrin field. Ironhorse Oil and Gas has denied to Reuters that it is the company in question. These two projects aim to develop Khurmala field to produce 100,000 barrels per day and raise the output of Himrin. The winners of the contract are to build new flow lines and build gas separation stations. The contract to develop the Suba-Luhais field has not yet been awarded as Iraq\'s Oil Ministry is studying the offers. If Iraq\'s cabinet approves the oil ministry\'s choice of companies, then this will be the first deal that Iraq has signed with a foreign oil company. Iraq is still trying to boost its production capacity to match levels last seen in the eighties, before the war with Iran. Oil officials hope to double Iraq\'s output by the end of the decade.\\n"', 'body_tldr': 'b"Reuters news agency reported that Iraq\'s Oil Ministry has awarded the first post-war oilfield contracts to a Canadian and a Turkish company.The contract to develop the Suba-Luhais field has not yet been awarded as Iraq\'s Oil Ministry is studying the offers.Shares in Irish oil company Petrel Resources have lost more than 50% of their value on a report that the firm has failed to win a contract in Iraq.If Iraq\'s cabinet approves the oil ministry\'s choice of companies, then this will be the first deal that Iraq has signed with a foreign oil company.Ironhorse Oil and Gas has denied to Reuters that it is the company in question.A Canadian company, named IOG, is reported to have won the contract to run the Himrin field."', 'news_source': 'BBC news'}]]

# This transforms the results into the format the system expects
# Normally run from the UI which is why it is different.
def transform_results_into_single_array(search_array):
    return_array = []
    for item in search_array:
        return_array.append(item[1]['body_tldr'])
    return return_array

# Empty dictionary
rouge_1 = {}
rouge_l = {}
# list of bucket sises to test
bucket_sizes = [500, 750, 1000, 1250, 1500, 1750, 2000]

# Create a data strucutre for the tests
for bucket in bucket_sizes:
    rouge_1[bucket] = {'precision':[], 'recall': []}
    rouge_l[bucket] = {'precision': [], 'recall': []}

# Function to run evaluation for search of the search results
# Adds result to results dictionary
def create_evaluation_score(search_result):
    for bucket_size in bucket_sizes:
        scorer = rouge_scorer.RougeScorer(['rougeL', 'rouge1'], use_stemmer=True)
        search_array_1 = text_aggregation_bucketing(search_result, bucket_size=bucket_size)
        search_string_1 = text_aggrogation_array(search_array_1)

        summary_gpt_bucket = gpt_3_summary_regenerate(search_array_1, use_bucket=True, temperature=0.8)
        score = scorer.score(search_string_1, summary_gpt_bucket)
        rouge_1[bucket_size]['recall'].append(score['rouge1'].recall)
        rouge_1[bucket_size]['precision'].append(score['rouge1'].precision)

        rouge_l[bucket_size]['recall'].append(score['rougeL'].recall)
        rouge_l[bucket_size]['precision'].append(score['rougeL'].precision)


# Running the functions with the defined searches
create_evaluation_score(search_results_1)
create_evaluation_score(search_results_2)
create_evaluation_score(search_results_3)

# Printing the results of the various bucket sizes
for bucket in bucket_sizes:
    print('---')
    print(bucket)
    print('Rouge1 recall', statistics.mean(rouge_1[bucket]['recall']))
    print('Rouge1 precision', statistics.mean(rouge_1[bucket]['precision']))

    print('RougeL recall', statistics.mean(rouge_l[bucket]['recall']))
    print('RougeL precision', statistics.mean(rouge_l[bucket]['precision']))
    print('---')
